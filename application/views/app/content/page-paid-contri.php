<div id="pagePaidContri">
	<div class="panel-buttons">
		<div class="row col-sm-12">
			<div class="form-group">
				<button type="button" name="btnPrint" value="print" class ="btn btn-success btn-space btn-print">
					<i class="icon icon-left s7-print"></i>PRINT
				</button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-6">
			
			<div class="info-block panel panel-default">
				<div class="form-group select-year">
					<label>Select Year</label>
					<select class="form-control list-year-sss"></select>
				</div>
				<div class="panel-heading">
					<h3>Paid Contribution List for SSS</h3>
				</div>
				<div class="sss-print">
					<p class="sss-title">Paid Contribution List for SSS</p>
				</div>
				<div class="panel-body">
					<div id="paid-sss-graph"></div>
					<div class="contri-content">
						<table class="no-border no-strip skills">
							<tbody class="no-border-x no-border-y">
								<tr>
									<td class="item">January</td>
									<td class="jan-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">February</td>
									<td class="feb-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">March</td>
									<td class="march-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">April</td>
									<td class="april-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">May</td>
									<td class="may-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">June</td>
									<td class="june-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">July</td>
									<td class="july-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">August</td>
									<td class="aug-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">September</td>
									<td class="sept-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">October</td>
									<td class="oct-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">November</td>
									<td class="nov-sss amount-contri clear-field-sss"></td>
								</tr>
								<tr>
									<td class="item">December</td>
									<td class="dec-sss amount-contri clear-field-sss"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-6">
			
			<div class="info-block panel panel-default">
				<div class="form-group select-year">
					<label>Select Year</label>
					<select class="form-control list-year-pagibig"></select>
				</div>
				<div class="panel-heading">
					<h3>Paid Contribution List for Pag-Ibig</h3>
				</div>
				<div class="pagibig-print">
					<p class="pagibig-title">Paid Contribution List for Pag-Ibig</p>
				</div>
				<div class="panel-body">
					<div id="paid-pagibig-graph"></div>
					<div class="contri-content">
						<table class="no-border no-strip skills">
							<tbody class="no-border-x no-border-y">
								<tr>
									<td class="item">January</td>
									<td class="jan-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">February</td>
									<td class="feb-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">March</td>
									<td class="march-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">April</td>
									<td class="april-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">May</td>
									<td class="may-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">June</td>
									<td class="june-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">July</td>
									<td class="july-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">August</td>
									<td class="aug-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">September</td>
									<td class="sept-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">October</td>
									<td class="oct-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">November</td>
									<td class="nov-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
								<tr>
									<td class="item">December</td>
									<td class="dec-pagibig amount-contri clear-field-pagibig"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class="panel panel-default">
		<div class="panel-heading">
			<h3>Paid Contribution List for SSS</h3>
		</div>
		<div class="panel-body">
			<table class="table table-striped table-hover table-fw-widget table-sss-paid">
				<thead>
					<tr>
						<th>Year</th>
						<th>Month</th>
						<th>Amount</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div> -->

	<!-- <div class="panel panel-default">
		<div class="panel-heading">
			<h3>Paid Contribution List for Pag-Ibig</h3>
		</div>
		<div class="panel-body">
			<table class="table table-striped table-hover table-fw-widget table-pagibig-paid">
				<thead>
					<tr>
						<th>Year</th>
						<th>Month</th>
						<th>Amount</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div> -->
</div>

<script type="text/javascript">
	var pagePaidContri = {};
	pagePaidContri.init = function(selector, callback){
		pagePaidContri.elem = $(selector);
		pagePaidContri.pagibigPaidMonth = [];
		pagePaidContri.pagibigPaidAmount = [];
		pagePaidContri.sssPaidMonth = [];
		pagePaidContri.sssPaidAmount = [];

		pagePaidContri.getDate = new Date();
		pagePaidContri.getYear = pagePaidContri.getDate.getFullYear();

		const monthNames = ["January", "February", "March", "April", "May", "June",
							  "July", "August", "September", "October", "November", "December"
							];

		pagePaidContri.elem.find('.btn-print').off("click").click(function(){
			window.print();
		});


		// pagePaidContri.elem.find('.table-sss-paid').DataTable({
		// 	"autowidth":false,
		// 	"paging" : true,
		// 	"searching": true,
		// 	"processing": true,
		// 	"serverSide": true,
		// 	"pagingType": "full_numbers",
		// 	"order": [[ 0, "desc" ]],
		// 	"ajax":{
		// 		"url": "<?php echo site_url('sss-paid-datatable')?>",
		// 		"dataScr" : function( json ){
		// 			return json['data'];
		// 		}
		// 	},
		// 	"columnDefs": [
		// 		{
		// 			"targets": 0,
		// 			"orderable": true,
		// 			//"data":  "null",
		// 			//"defaultContent": ""
		// 		},
		// 		{
		// 			"targets": 1,
		// 			"orderable": false,
		// 		},
		// 		{
		// 			"targets": 2,
		// 			"orderable": false
		// 		}
		// 	],
		// 	"columns" : [
		// 		{data: "year"},
		// 		{data: "month"},
		// 		{data: "amount"}
		// 	],
		// 	"drawCallback":function(settings){

		// 		pagePaidContri.elem.find('.table-sss-paid td:nth-child(2)').each(function(){
		// 			var elem = $(this);
		// 			var data = JSON.parse(elem.html());
		// 			elem.html(data);
		// 			elem.html(monthNames[data-1]);
		// 		});

		// 	},
		// 	dom:  	"<'row am-datatable-header'<'col-sm-6'l><'col-sm-6'f>>" +
		// 			"<'row am-datatable-body'<'col-sm-12'tr>>" +
		// 			"<'row am-datatable-footer'<'col-sm-5'i><'col-sm-7'p>>"
		// });


		// pagePaidContri.elem.find('.table-pagibig-paid').DataTable({
		// 	"autowidth":false,
		// 	"paging" : true,
		// 	"searching": true,
		// 	"processing": true,
		// 	"serverSide": true,
		// 	"pagingType": "full_numbers",
		// 	"order": [[ 0, "desc" ]],
		// 	"ajax":{
		// 		"url": "<?php echo site_url('pagibig-paid-datatable')?>",
		// 		"dataScr" : function( json ){
		// 			return json['data'];
		// 		}
		// 	},
		// 	"columnDefs": [
		// 		{
		// 			"targets": 0,
		// 			"orderable": true,
		// 			//"data":  "null",
		// 			//"defaultContent": ""
		// 		},
		// 		{
		// 			"targets": 1,
		// 			"orderable": false,
		// 		},
		// 		{
		// 			"targets": 2,
		// 			"orderable": false
		// 		}
		// 	],
		// 	"columns" : [
		// 		{data: "year"},
		// 		{data: "month"},
		// 		{data: "amount"}
		// 	],
		// 	"drawCallback":function(settings){

		// 		pagePaidContri.elem.find('.table-pagibig-paid td:nth-child(2)').each(function(){
		// 			var elem = $(this);
		// 			var data = JSON.parse(elem.html());
		// 			elem.html(data);
		// 			elem.html(monthNames[data-1]);
		// 		});

		// 	},
		// 	dom:  	"<'row am-datatable-header'<'col-sm-6'l><'col-sm-6'f>>" +
		// 			"<'row am-datatable-body'<'col-sm-12'tr>>" +
		// 			"<'row am-datatable-footer'<'col-sm-5'i><'col-sm-7'p>>"
		// });


		$.getJSON('<?php echo site_url('get-contri-by-year/')?>'+pagePaidContri.getYear, callback);
	}
	pagePaidContri.init("#pagePaidContri", function(result){
		pagePaidContri.populate(result);
	});

	pagePaidContri.populate = function(result){
		pagePaidContri.sssPaid = result['querySSS'];
		pagePaidContri.pagibigPaid = result['queryPagibig'];
		pagePaidContri.yearSSS = result['queryYearSSS'];
		pagePaidContri.yearPagibig = result['queryYearPagibig'];

		$.each(pagePaidContri.yearPagibig, function(keyYearPaginig, valYearPagibig){
			var createOption = $('<option></option>');
			createOption.attr('value', valYearPagibig['year']);
			createOption.html(valYearPagibig['year']);
			pagePaidContri.elem.find('.list-year-pagibig').append(createOption);
		});

		$.each(pagePaidContri.yearSSS, function(keyYearSSS, valYearSSS){
			var createOptionSSS = $('<option></option>');
			createOptionSSS.attr('value',valYearSSS['year']);
			createOptionSSS.html(valYearSSS['year']);
			pagePaidContri.elem.find('.list-year-sss').append(createOptionSSS);
		});

		$.each(pagePaidContri.pagibigPaid, function(keyPagibig, valPagibig){
			pagePaidContri.pagibigPaidMonth.push(valPagibig['month']);
			pagePaidContri.pagibigPaidAmount.push(valPagibig['amount']);

			if(valPagibig['month'] == 1){
				pagePaidContri.elem.find('.jan-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 2){
				pagePaidContri.elem.find('.feb-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 3){
				pagePaidContri.elem.find('.march-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 4){
				pagePaidContri.elem.find('.april-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 5){
				pagePaidContri.elem.find('.may-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 6){
				pagePaidContri.elem.find('.june-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 7){
				pagePaidContri.elem.find('.july-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 8){
				pagePaidContri.elem.find('.aug-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 9){
				pagePaidContri.elem.find('.sept-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 10){
				pagePaidContri.elem.find('.oct-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 11){
				pagePaidContri.elem.find('.nov-pagibig').text(valPagibig['amount']);
			}else if(valPagibig['month'] == 12){
				pagePaidContri.elem.find('.dec-pagibig').text(valPagibig['amount']);
			}
		});

		if(jQuery.inArray('1', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(0,0, "1");
			pagePaidContri.pagibigPaidAmount.splice(0,0, "0");
		}
		if(jQuery.inArray('2', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(1,0, "2");
			pagePaidContri.pagibigPaidAmount.splice(1,0, "0");
		}
		if(jQuery.inArray('3', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(2,0, "3");
			pagePaidContri.pagibigPaidAmount.splice(2,0, "0");
		}
		if(jQuery.inArray('4', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(3,0, "4");
			pagePaidContri.pagibigPaidAmount.splice(3,0, "0");
		}
		if(jQuery.inArray('5', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(4,0, "5");
			pagePaidContri.pagibigPaidAmount.splice(4,0, "0");
		}
		if(jQuery.inArray('6', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(5,0, "6");
			pagePaidContri.pagibigPaidAmount.splice(5,0, "0");
		}
		if(jQuery.inArray('7', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(6,0, "7");
			pagePaidContri.pagibigPaidAmount.splice(6,0, "0");
		}
		if(jQuery.inArray('8', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(7,0, "8");
			pagePaidContri.pagibigPaidAmount.splice(7,0, "0");
		}
		if(jQuery.inArray('9', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(8,0, "9");
			pagePaidContri.pagibigPaidAmount.splice(8,0, "0");
		}
		if(jQuery.inArray('10', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(9,0, "10");
			pagePaidContri.pagibigPaidAmount.splice(9,0, "0");
		}
		if(jQuery.inArray('11', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(10,0, "11");
			pagePaidContri.pagibigPaidAmount.splice(10,0, "0");
		}
		if(jQuery.inArray('12', pagePaidContri.pagibigPaidMonth) == -1){
			pagePaidContri.pagibigPaidMonth.splice(11,0, "12");
			pagePaidContri.pagibigPaidAmount.splice(11,0, "0");
		}

		$.each(pagePaidContri.sssPaid, function(keySSS, valSSS){
			pagePaidContri.sssPaidMonth.push(valSSS['month']);
			pagePaidContri.sssPaidAmount.push(valSSS['amount']);

			if(valSSS['month'] == 1){
				pagePaidContri.elem.find('.jan-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 2){
				pagePaidContri.elem.find('.feb-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 3){
				pagePaidContri.elem.find('.march-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 4){
				pagePaidContri.elem.find('.april-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 5){
				pagePaidContri.elem.find('.may-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 6){
				pagePaidContri.elem.find('.june-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 7){
				pagePaidContri.elem.find('.july-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 8){
				pagePaidContri.elem.find('.aug-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 9){
				pagePaidContri.elem.find('.sept-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 10){
				pagePaidContri.elem.find('.oct-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 11){
				pagePaidContri.elem.find('.nov-sss').text(valSSS['amount']);
			}else if(valSSS['month'] == 12){
				pagePaidContri.elem.find('.dec-sss').text(valSSS['amount']);
			}
		});

		if(jQuery.inArray('1', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(0,0, "1");
			pagePaidContri.sssPaidAmount.splice(0,0, "0");
		}
		if(jQuery.inArray('2', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(1,0, "2");
			pagePaidContri.sssPaidAmount.splice(1,0, "0");
		}
		if(jQuery.inArray('3', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(2,0, "3");
			pagePaidContri.sssPaidAmount.splice(2,0, "0");
		}
		if(jQuery.inArray('4', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(3,0, "4");
			pagePaidContri.sssPaidAmount.splice(3,0, "0");
		}
		if(jQuery.inArray('5', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(4,0, "5");
			pagePaidContri.sssPaidAmount.splice(4,0, "0");
		}
		if(jQuery.inArray('6', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(5,0, "6");
			pagePaidContri.sssPaidAmount.splice(5,0, "0");
		}
		if(jQuery.inArray('7', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(6,0, "7");
			pagePaidContri.sssPaidAmount.splice(6,0, "0");
		}
		if(jQuery.inArray('8', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(7,0, "8");
			pagePaidContri.sssPaidAmount.splice(7,0, "0");
		}
		if(jQuery.inArray('9', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(8,0, "9");
			pagePaidContri.sssPaidAmount.splice(8,0, "0");
		}
		if(jQuery.inArray('10', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(9,0, "10");
			pagePaidContri.sssPaidAmount.splice(9,0, "0");
		}
		if(jQuery.inArray('11', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(10,0, "11");
			pagePaidContri.sssPaidAmount.splice(10,0, "0");
		}
		if(jQuery.inArray('12', pagePaidContri.sssPaidMonth) == -1){
			pagePaidContri.sssPaidMonth.splice(11,0, "12");
			pagePaidContri.sssPaidAmount.splice(11,0, "0");
		}

		pagePaidContri.elem.find('.list-year-pagibig').change(function(){
			pagePaidContri.selectYearPagibig = pagePaidContri.elem.find('.list-year-pagibig').val();
			pagePaidContri.pagibigPaidMonth = [];
			pagePaidContri.pagibigPaidAmount = [];
			pagePaidContri.elem.find('.clear-field-pagibig').text('');
			$.getJSON('<?php echo site_url('get-pagibig-by-year/')?>' + pagePaidContri.selectYearPagibig, pagePaidContri.populate);
		});

		pagePaidContri.elem.find('.list-year-sss').change(function(){
			pagePaidContri.selectedYearSSS = pagePaidContri.elem.find('.list-year-sss').val();
			pagePaidContri.sssPaidAmount = [];
			pagePaidContri.sssPaidMonth = [];
			pagePaidContri.elem.find('.clear-field-sss').text('');
			$.getJSON('<?php echo site_url('get-sss-by-year/')?>' + pagePaidContri.selectedYearSSS, pagePaidContri.populate);
		});

		pagePaidContri.sss_graph_content = {
		  x: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], 
		  y: pagePaidContri.sssPaidAmount,
		  type: 'bar',
		  marker: {
		    color: '#8EC63F',
		    opacity: 0.7
		  }
		};

		pagePaidContri.sss_graph_data = [pagePaidContri.sss_graph_content];

		pagePaidContri.sss_graph_layout = {
		  title: 'SSS Contributions for the Year '+ pagePaidContri.elem.find('.list-year-sss').val(),
		  xaxis: {
		    tickangle: -45
		  },
		  barmode: 'group'
		};

		Plotly.newPlot('paid-sss-graph', pagePaidContri.sss_graph_data, pagePaidContri.sss_graph_layout);

		pagePaidContri.pagibig_graph_content = {
		  x: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], 
		  y: pagePaidContri.pagibigPaidAmount,
		  type: 'bar',
		  marker: {
		    color: '#8EC63F',
		    opacity: 0.7
		  }
		};

		pagePaidContri.pagibig_graph_data = [pagePaidContri.pagibig_graph_content];

		pagePaidContri.pagibig_graph_layout = {
		  title: 'Pag-Ibig Contributions for the Year ' + pagePaidContri.elem.find('.list-year-pagibig').val(),
		  xaxis: {
		    tickangle: -45
		  },
		  barmode: 'group'
		};

		Plotly.newPlot('paid-pagibig-graph', pagePaidContri.pagibig_graph_data, pagePaidContri.pagibig_graph_layout);
	}
</script>